# 分布式温控计费系统	系统解决方案

小组：303e

----

[TOC]

----

## 需求分析

功能需求：

用户：开启和关闭空调、自行设定空调温度、风速；获取需支付金额信息；获取空调使用账单、详单；

管理员：监控各房间空调使用状态；生成格式化空调使用统计报表；

性能需求：

响应速度要求：平均响应时间应低于1s

并发需求：同时支持50名以上用户和10名以上管理员

稳定性需求：系统能在预期系统运行压力的情况下，不间断稳定运行 

计费请求成功率达到99.999%以上。

其他：TBD



## 技术路线

（系统整体架构图、各个模块之间的关系、每个模块的功能等？）

系统架构：Client-Server

程序语言：Java

==图形界面：TBD==

==数据库：TBD==

通讯协议：Websocket

### 客户端

* ClientUI：负责与用户交互，提供设定与显示AC（空调）温度、设定与显示空调风速、显示需支付金额的功能。

* ClientCtrl：发送数据时，负责从ClientUI获取信息，并将其包装为内部数据结构，传递给ClientTrans；接收数据时，负责解析ClientTrans传递来的数据，传递给ClientUI显示。

* ClientTrans：发送数据时，负责包装ClientCtrl产生的数据结构，通过Websocket发送到服务端；接收数据时，负责解析服务端发送来的控制信息数据，并将其传递给ClientCtrl。

### 管理端

* AdminUI：负责与管理员交互，提供监控各个房间AC（空调）使用状态、==（TBD：控制任意房间空调温度与风速）==、打印各房间空调费用账单、打印各房间空调使用详单的功能。
* AdminCtrl：发送数据时，负责从AdminUI获取信息，并将其包装为内部数据结构，传递给AdminTrans；接收数据时，负责解析AdminTrans传递来的数据，传递给AdminUI显示。
* AdminTrans：发送数据时，负责包装AdminCtrl产生的数据结构，通过Websocket发送到服务端；接收数据时，负责解析服务端发送来的控制信息数据，并将其传递给AdminCtrl。
* 将客户端与管理端分离原因：考虑到客户端需要大规模部署，且一般为房间内的小型或嵌入式终端，合并管理端代码使得客户端存在冗余，造成空间浪费成本上升，且存在潜在安全风险。

### 服务端

* ServerTrans：接收数据时，负责解析客户端或管理端发送的数据，并将其传递给ServerCtrl；发送数据时，负责包装ServerCtrl产生的数据结构，通过Websocket发送到客户端或管理端。
* ServerCtrl：
	* 接收数据时，负责从ServerTrans获取信息，并将其解析为数据库可用格式，传递给ServerDAO；发送数据时，负责包装从ServerDAO传递来的数据，传递给ServerTrans。
	* 根据接收到的请求，控制AC（空调）的温度、风速等。
* ServerDAO：数据库访问对象，通过接口对数据库进行CRUD操作。

![SystemStructureV2](分布式温控计费系统_系统解决方案.assets/SystemStructureV2.png)



## 系统性能评估

（系统功能能否满足用户的需求、系统最大承载量、操作延时等？）



## 时间及人力资源安排

时间安排：TBD

人力安排：

林麒：需求分析
马嘉骥：方案设计
覃驰宇：可行性/系统性能评估
许哲诚：时间及人力资源安排